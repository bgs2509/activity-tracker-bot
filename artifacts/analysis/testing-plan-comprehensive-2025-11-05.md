# üß™ –ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –ü–õ–ê–ù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-05
**–í–µ—Ä—Å–∏—è:** 1.0
**–°—Ç–∞—Ç—É—Å:** Ready for Execution

---

## üìã EXECUTIVE SUMMARY

–î–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –≤–∫–ª—é—á–∞–µ—Ç **–∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø—Ä–æ–µ–∫—Ç–∞ Activity Tracker Bot –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö UI –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏ —É–ª—É—á—à–µ–Ω–∏–π –∏–∑ `ui-fixes-todo-2025-11-05-142922.md`.

**–£—Ä–æ–≤–Ω–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
1. ‚úÖ Manual E2E Testing (UI scenarios)
2. ‚úÖ Automated Unit Tests
3. ‚úÖ Automated Service Tests
4. ‚úÖ Automated Integration Tests
5. ‚úÖ Regression Testing
6. ‚úÖ Performance Testing

**–¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- Coverage: 80%+
- Critical paths: 100% tested
- Zero critical bugs
- P95 response time < 2s

---

## üéØ –ó–ê–î–ê–ß–ê 15: –ö–û–ú–ü–õ–ï–ö–°–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ù–û (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –ü–û–°–õ–ï –∑–∞–¥–∞—á 1-14)
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 8-12 —á–∞—Å–æ–≤
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** QA Engineer + Developer

---

## –ß–ê–°–¢–¨ 1: –†–£–ß–ù–û–ï E2E –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï UI

### üì± –†–∞–∑–¥–µ–ª 1.1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ Onboarding

**Test Case TC-001: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

```
Prerequisite: –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

Steps:
1. –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å /start
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î

Expected Result:
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
‚úì –ü–æ–∫–∞–∑–∞–Ω–∞ –≥–ª–∞–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
‚úì –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
‚úì –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω –ø–µ—Ä–≤—ã–π –∞–≤—Ç–æ–æ–ø—Ä–æ—Å

Pass/Fail: [ ]
Notes: _______________
```

---

### üìù –†–∞–∑–¥–µ–ª 1.2: –ó–∞–ø–∏—Å—å –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–ó–ê–î–ê–ß–ê 8)

**Test Case TC-002: –ó–∞–ø–∏—Å—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å inline –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π**

```
Prerequisite: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –µ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

Steps:
1. –ù–∞–∂–∞—Ç—å "‚úèÔ∏è –ó–∞–ø–∏—Å–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
2. –í–≤–µ—Å—Ç–∏ –æ–ø–∏—Å–∞–Ω–∏–µ: "–†–∞–±–æ—Ç–∞ –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞–∑–∞–Ω—ã –∫–∞–∫ inline –∫–Ω–æ–ø–∫–∏ (–ø–æ 2 –≤ —Ä—è–¥—É)
4. –ù–∞–∂–∞—Ç—å –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é "üíº –†–∞–±–æ—Ç–∞"
5. –í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∫–Ω–æ–ø–∫–æ–π "‚è∞ 1—á –Ω–∞–∑–∞–¥"
6. –í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –∫–Ω–æ–ø–∫–æ–π "‚è± 30–º"
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

Expected Result:
‚úì –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞–∑–∞–Ω—ã –∫–∞–∫ inline –∫–Ω–æ–ø–∫–∏
‚úì –ï—Å—Ç—å –∫–Ω–æ–ø–∫–∞ "‚ùå –û—Ç–º–µ–Ω–∏—Ç—å"
‚úì –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞–∑–∞–Ω–æ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞
‚úì –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-003: –û—Ç–º–µ–Ω–∞ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**

```
Prerequisite: –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø–∏—Å–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞ —à–∞–≥–µ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

Steps:
1. –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
2. –í–≤–µ—Å—Ç–∏ –æ–ø–∏—Å–∞–Ω–∏–µ
3. –ù–∞ —ç–∫—Ä–∞–Ω–µ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞–∂–∞—Ç—å "‚ùå –û—Ç–º–µ–Ω–∏—Ç—å"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—á–∏—Å—Ç–∫—É FSM

Expected Result:
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ "‚ùå –ó–∞–ø–∏—Å—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –æ—Ç–º–µ–Ω–µ–Ω–∞."
‚úì FSM state –æ—á–∏—â–µ–Ω
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-004: –ü—Ä–æ–ø—É—Å–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ "0"**

```
Prerequisite: –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø–∏—Å–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞ —à–∞–≥–µ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

Steps:
1. –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
2. –í–≤–µ—Å—Ç–∏ –æ–ø–∏—Å–∞–Ω–∏–µ
3. –ù–∞ —ç–∫—Ä–∞–Ω–µ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–æ–º "0"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥–æ–ª–∂–∏–ª—Å—è –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

Expected Result:
‚úì –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø—Ä–æ–ø—É—â–µ–Ω–∞ (category_id = null)
‚úì –ü–æ–∫–∞–∑–∞–Ω –≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞
‚úì –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–ø–∏—Å–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-005: –ó–∞–ø–∏—Å—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º –≤–≤–æ–¥–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–ó–ê–î–ê–ß–ê 6)**

```
Prerequisite: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –µ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

Steps:
1. –ù–∞–∂–∞—Ç—å "‚úèÔ∏è –ó–∞–ø–∏—Å–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
2. –í–≤–µ—Å—Ç–∏ –æ–ø–∏—Å–∞–Ω–∏–µ
3. –í—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∫–Ω–æ–ø–∫–æ–π
4. –í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∫–Ω–æ–ø–∫–æ–π "‚è∞ 2—á –Ω–∞–∑–∞–¥"
5. –í–≤–µ—Å—Ç–∏ –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –¢–ï–ö–°–¢–û–ú: "30–º"
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–∫–∞–∑–∞–Ω–æ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

Expected Result:
‚úì –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úì –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
‚úì –í–ê–ñ–ù–û: –ü–æ–∫–∞–∑–∞–Ω–æ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (reply_markup –¥–æ–±–∞–≤–ª–µ–Ω)

Pass/Fail: [ ]
Notes: _______________
```

---

### üìÇ –†–∞–∑–¥–µ–ª 1.3: –ö–∞—Ç–µ–≥–æ—Ä–∏–∏

**Test Case TC-006: –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**

```
Prerequisite: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

Steps:
1. –ù–∞–∂–∞—Ç—å "üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏"
2. –ù–∞–∂–∞—Ç—å "‚ûï –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é"
3. –í–≤–µ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ: "–°–ø–æ—Ä—Ç"
4. –í–≤–µ—Å—Ç–∏ —ç–º–æ–¥–∑–∏: "üèÉ"
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ

Expected Result:
‚úì –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∞
‚úì –ü–æ–∫–∞–∑–∞–Ω–∞ –≤ —Å–ø–∏—Å–∫–µ
‚úì –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –ë–î

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-007: –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**

```
Prerequisite: –ï—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—è –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π

Steps:
1. –û—Ç–∫—Ä—ã—Ç—å "üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏"
2. –í—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
3. –ù–∞–∂–∞—Ç—å "üóë –£–¥–∞–ª–∏—Ç—å"
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ

Expected Result:
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
‚úì –ö–∞—Ç–µ–≥–æ—Ä–∏—è —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –ë–î
‚úì –û–±–Ω–æ–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

Pass/Fail: [ ]
Notes: _______________
```

---

### ‚è∞ –†–∞–∑–¥–µ–ª 1.4: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –û–ø—Ä–æ—Å—ã (–ó–ê–î–ê–ß–ò 1, 5, 7, 13)

**Test Case TC-008: –ê–≤—Ç–æ–æ–ø—Ä–æ—Å - –≤–∞—Ä–∏–∞–Ω—Ç "–ó–∞–Ω–∏–º–∞–ª—Å—è —á–µ–º-—Ç–æ" (–ó–ê–î–ê–ß–ê 1)**

```
Prerequisite: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –µ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞

Steps:
1. –î–æ–∂–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–æ—Å–∞ (–∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –¥–ª—è —Ç–µ—Å—Ç–∞)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—Å—Ç –æ–ø—Ä–æ—Å–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω —Å–æ–≥–ª–∞—Å–Ω–æ –ó–ê–î–ê–ß–ï 13)
3. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "‚úèÔ∏è –ó–∞–Ω–∏–º–∞–ª—Å—è —á–µ–º-—Ç–æ"
4. –í—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–∑ inline –∫–Ω–æ–ø–æ–∫
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ–ø—Ä–æ—Å–∞

Expected Result:
‚úì –ü–æ–∫–∞–∑–∞–Ω –æ–ø—Ä–æ—Å —Å –∫–Ω–æ–ø–∫–æ–π "‚úèÔ∏è –ó–∞–Ω–∏–º–∞–ª—Å—è —á–µ–º-—Ç–æ"
‚úì –¢–µ–∫—Å—Ç –æ–ø—Ä–æ—Å–∞ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞)
‚úì –ü–æ–∫–∞–∑–∞–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–∞–∫ inline –∫–Ω–æ–ø–∫–∏
‚úì –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∞ —Å duration = poll_interval
‚úì –°–ª–µ–¥—É—é—â–∏–π –æ–ø—Ä–æ—Å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –∏ –≤—Ä–µ–º–µ–Ω–µ–º —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ–ø—Ä–æ—Å–∞

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-009: –ê–≤—Ç–æ–æ–ø—Ä–æ—Å - –≤–∞—Ä–∏–∞–Ω—Ç "–°–ø–∞–ª" (–ó–ê–î–ê–ß–ê 5)**

```
Prerequisite: –î–æ–∂–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–æ–ø—Ä–æ—Å–∞

Steps:
1. –ü–æ–ª—É—á–∏—Ç—å –∞–≤—Ç–æ–æ–ø—Ä–æ—Å
2. –ù–∞–∂–∞—Ç—å "üò¥ –°–ø–∞–ª"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–Ω–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏

Expected Result:
‚úì –ö–∞—Ç–µ–≥–æ—Ä–∏—è "—Å–æ–Ω" —Å–æ–∑–¥–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚úì –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–Ω–∞ = –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ (–ù–ï –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ 8 —á–∞—Å–æ–≤!)
‚úì last_poll_time –æ–±–Ω–æ–≤–ª—ë–Ω (–µ—Å–ª–∏ API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç)
‚úì –°–ª–µ–¥—É—é—â–∏–π –æ–ø—Ä–æ—Å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-010: –ê–≤—Ç–æ–æ–ø—Ä–æ—Å - –æ—Ç–∫–ª–∞–¥—ã–≤–∞–Ω–∏–µ –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ FSM (–ó–ê–î–ê–ß–ê 7)**

```
Prerequisite: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø–∏—Å–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

Steps:
1. –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (FSM –∞–∫—Ç–∏–≤–µ–Ω)
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–æ–ø—Ä–æ—Å –≤—Ä—É—á–Ω—É—é (–∏–ª–∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –≤—Ä–µ–º–µ–Ω–∏)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–ø—Ä–æ—Å –ù–ï –ø—Ä–∏—Å–ª–∞–Ω
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å –æ postpone –Ω–∞ 10 –º–∏–Ω—É—Ç
5. –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–ø–∏—Å—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
6. –ß–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–ø—Ä–æ—Å –ø—Ä–∏—à—ë–ª

Expected Result:
‚úì –û–ø—Ä–æ—Å –Ω–µ –ø—Ä–∏—Å–ª–∞–Ω –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ FSM
‚úì –í –ª–æ–≥–∞—Ö: "User X is in FSM state Y, postponing poll by 10 minutes"
‚úì Job rescheduled –Ω–∞ +10 –º–∏–Ω—É—Ç
‚úì –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è FSM –æ–ø—Ä–æ—Å –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-011: –ê–≤—Ç–æ–æ–ø—Ä–æ—Å - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ**

```
Prerequisite: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–ø—É—Å—Ç–∏–ª –æ–ø—Ä–æ—Å

Steps:
1. –ü–æ–ª—É—á–∏—Ç—å –∞–≤—Ç–æ–æ–ø—Ä–æ—Å
2. –ù–∞–∂–∞—Ç—å "‚è∞ –ù–∞–ø–æ–º–Ω–∏ –ø–æ–∑–∂–µ"
3. –î–æ–∂–¥–∞—Ç—å—Å—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å job –≤ scheduler)
4. –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
5. –ù–∞–∂–∞—Ç—å "‚úÖ –•–æ—Ä–æ—à–æ, —Ä–∞—Å—Å–∫–∞–∂—É"

Expected Result:
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–∏
‚úì Job –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω –Ω–∞ +reminder_delay –º–∏–Ω—É—Ç
‚úì –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤–æ–≤—Ä–µ–º—è
‚úì –ü–æ—Å–ª–µ "–•–æ—Ä–æ—à–æ" –ø–æ–∫–∞–∑–∞–Ω—ã —Ç–µ –∂–µ –æ–ø—Ü–∏–∏ —á—Ç–æ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –æ–ø—Ä–æ—Å–µ

Pass/Fail: [ ]
Notes: _______________
```

---

### ‚öôÔ∏è –†–∞–∑–¥–µ–ª 1.5: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–ó–ê–î–ê–ß–ê 2, 4)

**Test Case TC-012: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –±—É–¥–Ω–∏—Ö –¥–Ω–µ–π - –∫–∞—Å—Ç–æ–º–Ω—ã–π –≤–≤–æ–¥ (–ó–ê–î–ê–ß–ê 2)**

```
Prerequisite: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

Steps:
1. –û—Ç–∫—Ä—ã—Ç—å "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
2. –í—ã–±—Ä–∞—Ç—å "‚è± –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ–ø—Ä–æ—Å–æ–≤"
3. –í—ã–±—Ä–∞—Ç—å "üìÖ –ë—É–¥–Ω–∏–µ –¥–Ω–∏"
4. –ù–∞–∂–∞—Ç—å "‚úèÔ∏è –£–∫–∞–∑–∞—Ç—å —Å–≤–æ—ë –≤—Ä–µ–º—è"
5. –í–≤–µ—Å—Ç–∏ "90"
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ—Å—á—ë—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –æ–ø—Ä–æ—Å–æ–≤

Expected Result:
‚úì –ü–æ–∫–∞–∑–∞–Ω –ø—Ä–æ–º–ø—Ç –¥–ª—è –≤–≤–æ–¥–∞
‚úì –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (30-480 –º–∏–Ω—É—Ç)
‚úì –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ –ë–î
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ "–∫–∞–∂–¥—ã–µ 1—á 30–º"
‚úì Poll job rescheduled
‚úì –í –ª–æ–≥–∞—Ö: "Rescheduled poll for user X with custom weekday interval 90"

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-013: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö - –∫–∞—Å—Ç–æ–º–Ω—ã–π –≤–≤–æ–¥ (–ó–ê–î–ê–ß–ê 2)**

```
Prerequisite: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

Steps:
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã ‚Üí –í—ã—Ö–æ–¥–Ω—ã–µ
2. –ù–∞–∂–∞—Ç—å "‚úèÔ∏è –£–∫–∞–∑–∞—Ç—å —Å–≤–æ—ë –≤—Ä–µ–º—è"
3. –í–≤–µ—Å—Ç–∏ "210"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

Expected Result:
‚úì –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (30-600 –º–∏–Ω—É—Ç)
‚úì –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ "–∫–∞–∂–¥—ã–µ 3—á 30–º"
‚úì Poll rescheduled

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-014: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π - –∫–∞—Å—Ç–æ–º–Ω—ã–π –≤–≤–æ–¥ (–ó–ê–î–ê–ß–ê 2)**

```
Prerequisite: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

Steps:
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
2. –ù–∞–∂–∞—Ç—å "‚è± –ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É"
3. –ù–∞–∂–∞—Ç—å "‚úèÔ∏è –£–∫–∞–∑–∞—Ç—å —Å–≤–æ—ë –≤—Ä–µ–º—è"
4. –í–≤–µ—Å—Ç–∏ "45"
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

Expected Result:
‚úì –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (5-120 –º–∏–Ω—É—Ç)
‚úì –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ "–Ω–∞–ø–æ–º–Ω–∏—Ç—å —á–µ—Ä–µ–∑ 45 –º–∏–Ω—É—Ç"

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-015: –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –≤–≤–æ–¥–∞ - –Ω–µ–≤–µ—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è**

```
Prerequisite: –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞

Steps:
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã ‚Üí –ë—É–¥–Ω–∏–µ ‚Üí –ö–∞—Å—Ç–æ–º–Ω—ã–π
2. –í–≤–µ—Å—Ç–∏ "15" (–º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞ 30)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏
4. –í–≤–µ—Å—Ç–∏ "500" (–±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º—É–º–∞ 480)
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏
6. –í–≤–µ—Å—Ç–∏ "abc" (–Ω–µ —á–∏—Å–ª–æ)
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏

Expected Result:
‚úì –î–ª—è 15: "‚ö†Ô∏è –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 30 –¥–æ 480 –º–∏–Ω—É—Ç"
‚úì –î–ª—è 500: "‚ö†Ô∏è –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 30 –¥–æ 480 –º–∏–Ω—É—Ç"
‚úì –î–ª—è abc: "‚ö†Ô∏è –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç! –í–≤–µ–¥–∏ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ"
‚úì FSM state –ù–ï –æ—á–∏—â–µ–Ω, –º–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –∑–∞–Ω–æ–≤–æ

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-016: –¢–∏—Ö–∏–µ —á–∞—Å—ã - –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ (–ó–ê–î–ê–ß–ê 4)**

```
Prerequisite: –¢–∏—Ö–∏–µ —á–∞—Å—ã –≤—ã–∫–ª—é—á–µ–Ω—ã

Steps:
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –¢–∏—Ö–∏–µ —á–∞—Å—ã
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–Ω–æ–ø–∫–∞ "‚è∞ –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è" –û–¢–°–£–¢–°–¢–í–£–ï–¢
3. –ù–∞–∂–∞—Ç—å "‚úÖ –í–∫–ª—é—á–∏—Ç—å —Ç–∏—Ö–∏–µ —á–∞—Å—ã"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–Ω–æ–ø–∫–∞ "‚è∞ –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è" –ü–û–Ø–í–ò–õ–ê–°–¨
5. –ù–∞–∂–∞—Ç—å "‚ùå –û—Ç–∫–ª—é—á–∏—Ç—å —Ç–∏—Ö–∏–µ —á–∞—Å—ã"
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –∏—Å—á–µ–∑–ª–∞

Expected Result:
‚úì –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–±–µ–∑ –ø—É—Å—Ç—ã—Ö —Å–ø–∏—Å–∫–æ–≤)
‚úì –ö–Ω–æ–ø–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è/—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚úì –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ –ë–î

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-017: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è - –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ (–ó–ê–î–ê–ß–ê 4)**

```
Prerequisite: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã

Steps:
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–Ω–æ–ø–∫–∞ "‚è± –ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É" –ü–†–ò–°–£–¢–°–¢–í–£–ï–¢
3. –ù–∞–∂–∞—Ç—å "‚ùå –û—Ç–∫–ª—é—á–∏—Ç—å"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–Ω–æ–ø–∫–∞ "‚è± –ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É" –ò–°–ß–ï–ó–õ–ê
5. –í–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ

Expected Result:
‚úì –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úì –ö–Ω–æ–ø–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è/—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
‚úì –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

Pass/Fail: [ ]
Notes: _______________
```

---

### üö´ –†–∞–∑–¥–µ–ª 1.6: –ö–æ–º–∞–Ω–¥–∞ /cancel (–ó–ê–î–ê–ß–ê 3)

**Test Case TC-018: /cancel –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø–∏—Å–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**

```
Prerequisite: –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø–∏—Å–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

Steps:
1. –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
2. –í–≤–µ—Å—Ç–∏ –æ–ø–∏—Å–∞–Ω–∏–µ
3. –ù–∞ –ª—é–±–æ–º —à–∞–≥–µ (–≤—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –≤—Ä–µ–º–µ–Ω–∏) –æ—Ç–ø—Ä–∞–≤–∏—Ç—å /cancel
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—á–∏—Å—Ç–∫—É FSM
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

Expected Result:
‚úì FSM state –æ—á–∏—â–µ–Ω
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ "‚ùå –ó–∞–ø–∏—Å—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –æ—Ç–º–µ–Ω–µ–Ω–∞."
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚úì –ú–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-019: /cancel –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**

```
Prerequisite: –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

Steps:
1. –ù–∞—á–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
2. –ù–∞ —à–∞–≥–µ –≤–≤–æ–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å /cancel
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—á–∏—Å—Ç–∫—É FSM

Expected Result:
‚úì FSM cleared
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ "‚ùå –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–º–µ–Ω–µ–Ω–æ."
‚úì –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-020: /cancel –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫**

```
Prerequisite: –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞

Steps:
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã ‚Üí –ë—É–¥–Ω–∏–µ ‚Üí –ö–∞—Å—Ç–æ–º–Ω—ã–π
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å /cancel
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—á–∏—Å—Ç–∫—É FSM

Expected Result:
‚úì FSM cleared
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ "‚ùå –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞."
‚úì –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

Pass/Fail: [ ]
Notes: _______________
```

**Test Case TC-021: /cancel –∫–æ–≥–¥–∞ FSM –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω**

```
Prerequisite: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é (FSM –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω)

Steps:
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å /cancel
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

Expected Result:
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ "–ù–µ—á–µ–≥–æ –æ—Ç–º–µ–Ω—è—Ç—å. –¢—ã —Å–µ–π—á–∞—Å –Ω–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏."
‚úì –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

Pass/Fail: [ ]
Notes: _______________
```

---

### ‚ú® –†–∞–∑–¥–µ–ª 1.7: UX –£–ª—É—á—à–µ–Ω–∏—è (–ó–ê–î–ê–ß–ê 9)

**Test Case TC-022: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ø–µ—á–∞—Ç–∞–µ—Ç..." –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–æ–∫**

```
Prerequisite: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é

Steps:
1. –ù–∞–∂–∞—Ç—å –ª—é–±—É—é inline –∫–Ω–æ–ø–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä "‚úèÔ∏è –ó–∞–ø–∏—Å–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å")
2. –°–†–ê–ó–£ –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
3. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–Ω–æ–ø–æ–∫:
   - "üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏"
   - "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
   - –ö–Ω–æ–ø–∫–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
   - –ö–Ω–æ–ø–∫–∏ –≤ –æ–ø—Ä–æ—Å–∞—Ö

Expected Result:
‚úì –°–†–ê–ó–£ –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ø–µ—á–∞—Ç–∞–µ—Ç..."
‚úì –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ~1-2 —Å–µ–∫—É–Ω–¥—ã
‚úì –ó–∞—Ç–µ–º –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç–≤–µ—Ç –±–æ—Ç–∞
‚úì UX —É–ª—É—á—à–µ–Ω - –Ω–µ—Ç –æ—â—É—â–µ–Ω–∏—è "–∑–∞–≤–∏—Å—à–µ–≥–æ" –±–æ—Ç–∞

Pass/Fail: [ ]
Notes: _______________
```

---

### üìä –†–∞–∑–¥–µ–ª 1.8: –ü—Ä–æ—Å–º–æ—Ç—Ä –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π

**Test Case TC-023: –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π**

```
Prerequisite: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å 5+ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π

Steps:
1. –ù–∞–∂–∞—Ç—å "üìä –ú–æ–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞

Expected Result:
‚úì –ü–æ–∫–∞–∑–∞–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
‚úì –§–æ—Ä–º–∞—Ç: "üèÉ –°–ø–æ—Ä—Ç: –ë–µ–≥ –≤ –ø–∞—Ä–∫–µ (1—á 30–º)"
‚úì –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º
‚úì –ü–æ–∫–∞–∑–∞–Ω–æ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

Pass/Fail: [ ]
Notes: _______________
```

---

## –ß–ê–°–¢–¨ 2: –†–ï–ì–†–ï–°–°–ò–û–ù–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### üîÑ –†–∞–∑–¥–µ–ª 2.1: Smoke Tests

**Test Case TC-024: –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**

```
Steps:
1. docker compose down
2. docker compose up -d
3. docker compose ps
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health checks

Expected Result:
‚úì –í—Å–µ 4 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑–∞–ø—É—â–µ–Ω—ã (postgres, redis, data_api, bot)
‚úì Health checks: healthy
‚úì –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

Pass/Fail: [ ]
Command: docker compose ps --format "table {{.Names}}\t{{.Status}}"
```

**Test Case TC-025: Health endpoint API**

```
Steps:
1. curl http://localhost:8080/health

Expected Result:
‚úì HTTP 200
‚úì {"status": "healthy"}

Pass/Fail: [ ]
```

---

### üîÑ –†–∞–∑–¥–µ–ª 2.2: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ Flow

**Test Case TC-026: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚Üí –æ–ø—Ä–æ—Å**

```
Steps:
1. –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí /start
2. –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
3. –ó–∞–ø–∏—Å–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
4. –î–æ–∂–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–æ–ø—Ä–æ—Å–∞
5. –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –æ–ø—Ä–æ—Å

Expected Result:
‚úì –í—Å–µ —à–∞–≥–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
‚úì –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î
‚úì Scheduler —Ä–∞–±–æ—Ç–∞–µ—Ç

Pass/Fail: [ ]
```

---

## –ß–ê–°–¢–¨ 3: –ê–í–¢–û–ú–ê–¢–ò–ó–ò–†–û–í–ê–ù–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### üß™ –†–∞–∑–¥–µ–ª 3.1: Unit Tests –¥–ª—è Poll Handlers (–ó–ê–î–ê–ß–ê 1)

**Test File:** `services/tracker_activity_bot/tests/unit/test_poll_handlers.py`

```python
"""
Unit tests for poll handlers.

Tests new functionality from TASK 1: "I was doing something" poll option.
"""
import pytest
from unittest.mock import AsyncMock, MagicMock
from aiogram import types, Bot
from aiogram.fsm.context import FSMContext
from aiogram.fsm.storage.memory import MemoryStorage

from src.api.handlers.poll import (
    handle_poll_activity_start,
    handle_poll_category_select,
    handle_poll_cancel
)
from src.api.states.poll import PollStates


@pytest.fixture
def bot():
    """Mock bot instance."""
    bot = Bot(token="TEST_TOKEN")
    bot.session = AsyncMock()
    return bot


@pytest.fixture
async def fsm_context():
    """Provide FSM context with memory storage."""
    storage = MemoryStorage()
    context = FSMContext(
        storage=storage,
        key="test_user_123:test_chat_456"
    )
    yield context
    await context.clear()


@pytest.fixture
def callback_factory(bot):
    """Factory for creating mock CallbackQuery."""
    def _create(data: str, user_id: int = 123):
        user = types.User(id=user_id, is_bot=False, first_name="Test")
        chat = types.Chat(id=user_id, type="private")
        message = types.Message(
            message_id=1,
            date=1234567890,
            chat=chat,
            from_user=user,
            text="Test",
            bot=bot
        )
        callback = types.CallbackQuery(
            id="cb_123",
            from_user=user,
            message=message,
            data=data,
            chat_instance="test"
        )
        callback.answer = AsyncMock()
        callback.message.answer = AsyncMock()
        return callback
    return _create


class TestPollActivityFlow:
    """Test poll activity recording flow (TASK 1)."""

    @pytest.mark.unit
    @pytest.mark.asyncio
    async def test_handle_poll_activity_start_success(
        self,
        callback_factory,
        fsm_context,
        mocker
    ):
        """Test starting activity recording from poll."""
        # Mock services
        mock_user_service = mocker.patch(
            'src.api.handlers.poll.UserService'
        )
        mock_user_service.return_value.get_by_telegram_id = AsyncMock(
            return_value={"id": "user_123", "telegram_id": 123}
        )

        mock_category_service = mocker.patch(
            'src.api.handlers.poll.CategoryService'
        )
        mock_category_service.return_value.get_user_categories = AsyncMock(
            return_value=[
                {"id": 1, "name": "Work", "emoji": "üíº"},
                {"id": 2, "name": "Sport", "emoji": "üèÉ"}
            ]
        )

        # Create callback
        callback = callback_factory("poll_activity")

        # Call handler
        await handle_poll_activity_start(callback, fsm_context)

        # Assertions
        assert await fsm_context.get_state() == PollStates.waiting_for_poll_category.state
        data = await fsm_context.get_data()
        assert data["user_id"] == "user_123"

        callback.message.answer.assert_called_once()
        call_text = callback.message.answer.call_args[0][0]
        assert "–ß–µ–º —Ç—ã –∑–∞–Ω–∏–º–∞–ª—Å—è?" in call_text
        assert "–í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é" in call_text

        callback.answer.assert_called_once()

    @pytest.mark.unit
    @pytest.mark.asyncio
    async def test_handle_poll_activity_start_no_categories(
        self,
        callback_factory,
        fsm_context,
        mocker
    ):
        """Test starting activity when user has no categories."""
        # Mock user exists but has no categories
        mocker.patch(
            'src.api.handlers.poll.UserService'
        ).return_value.get_by_telegram_id = AsyncMock(
            return_value={"id": "user_123"}
        )
        mocker.patch(
            'src.api.handlers.poll.CategoryService'
        ).return_value.get_user_categories = AsyncMock(
            return_value=[]
        )

        callback = callback_factory("poll_activity")

        await handle_poll_activity_start(callback, fsm_context)

        # Should show error and not set FSM state
        assert await fsm_context.get_state() is None
        call_text = callback.message.answer.call_args[0][0]
        assert "–Ω–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π" in call_text.lower()

    @pytest.mark.unit
    @pytest.mark.asyncio
    async def test_handle_poll_category_select_creates_activity(
        self,
        callback_factory,
        fsm_context,
        mocker
    ):
        """Test category selection creates activity with correct duration."""
        from datetime import datetime, timezone

        # Set up FSM state
        await fsm_context.set_state(PollStates.waiting_for_poll_category)

        # Mock services
        mocker.patch(
            'src.api.handlers.poll.UserService'
        ).return_value.get_by_telegram_id = AsyncMock(
            return_value={"id": "user_123", "timezone": "Europe/Moscow"}
        )

        mocker.patch(
            'src.api.handlers.poll.UserSettingsService'
        ).return_value.get_settings = AsyncMock(
            return_value={
                "poll_interval_weekday": 60,  # 1 hour
                "poll_interval_weekend": 120
            }
        )

        mock_activity_service = mocker.patch(
            'src.api.handlers.poll.ActivityService'
        )
        mock_activity_service.return_value.create_activity = AsyncMock()

        mock_scheduler = mocker.patch(
            'src.api.handlers.poll.scheduler_service'
        )
        mock_scheduler.schedule_poll = AsyncMock()

        # Create callback
        callback = callback_factory("poll_category_1")

        # Call handler
        await handle_poll_category_select(callback, fsm_context)

        # Verify activity created
        mock_activity_service.return_value.create_activity.assert_called_once()
        call_kwargs = mock_activity_service.return_value.create_activity.call_args[1]

        assert call_kwargs["category_id"] == 1
        assert call_kwargs["description"] == "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"

        # Verify duration is poll_interval (weekday = 60 min)
        start_time = call_kwargs["start_time"]
        end_time = call_kwargs["end_time"]
        duration = (end_time - start_time).total_seconds() / 60
        assert 59 <= duration <= 61  # Allow 1 min tolerance

        # Verify poll rescheduled
        mock_scheduler.schedule_poll.assert_called_once()

        # Verify FSM cleared
        assert await fsm_context.get_state() is None

    @pytest.mark.unit
    @pytest.mark.asyncio
    async def test_handle_poll_cancel(
        self,
        callback_factory,
        fsm_context
    ):
        """Test canceling poll activity recording."""
        # Set FSM state
        await fsm_context.set_state(PollStates.waiting_for_poll_category)

        callback = callback_factory("poll_cancel")

        await handle_poll_cancel(callback, fsm_context)

        # Verify FSM cleared
        assert await fsm_context.get_state() is None

        # Verify message
        call_text = callback.message.answer.call_args[0][0]
        assert "–æ—Ç–º–µ–Ω–µ–Ω–∞" in call_text.lower()


# TODO: Add more tests for:
# - Weekend vs weekday interval calculation
# - Timezone handling
# - Error handling when API fails
# - Scheduler errors
```

**Coverage target:** 80%+

---

### üß™ –†–∞–∑–¥–µ–ª 3.2: Unit Tests –¥–ª—è Settings Handlers (–ó–ê–î–ê–ß–ê 2)

**Test File:** `services/tracker_activity_bot/tests/unit/test_settings_custom_input.py`

```python
"""
Unit tests for settings custom input handlers.

Tests new functionality from TASK 2: custom time input for intervals.
"""
import pytest
from unittest.mock import AsyncMock
from aiogram import types, Bot
from aiogram.fsm.context import FSMContext

from src.api.handlers.settings import (
    show_weekday_custom_input,
    process_weekday_custom_input,
    show_weekend_custom_input,
    process_weekend_custom_input,
    process_reminder_delay_custom
)
from src.api.states.settings import SettingsStates


class TestCustomIntervalInput:
    """Test custom interval input for settings."""

    @pytest.mark.unit
    @pytest.mark.asyncio
    async def test_weekday_custom_input_valid(self, message_factory, fsm_context, mocker):
        """Test valid weekday custom interval input."""
        # Mock services
        mocker.patch(
            'src.api.handlers.settings.UserService'
        ).return_value.get_by_telegram_id = AsyncMock(
            return_value={"id": "user_123", "timezone": "Europe/Moscow"}
        )

        mocker.patch(
            'src.api.handlers.settings.UserSettingsService'
        ).return_value.get_settings = AsyncMock(
            return_value={"id": "settings_123", "poll_interval_weekday": 120}
        )
        mocker.patch(
            'src.api.handlers.settings.UserSettingsService'
        ).return_value.update_settings = AsyncMock()

        mock_scheduler = mocker.patch('src.api.handlers.settings.scheduler_service')
        mock_scheduler.schedule_poll = AsyncMock()

        # Set FSM state
        await fsm_context.set_state(SettingsStates.waiting_for_weekday_interval_custom)

        # Create message with valid input
        message = message_factory("90")

        # Call handler
        await process_weekday_custom_input(message, fsm_context)

        # Verify settings updated
        # Verify scheduler called
        # Verify confirmation message
        assert await fsm_context.get_state() is None
        call_text = message.answer.call_args[0][0]
        assert "1—á 30–º" in call_text

    @pytest.mark.unit
    @pytest.mark.parametrize("invalid_value,expected_error", [
        ("15", "–æ—Ç 30 –¥–æ 480"),
        ("500", "–æ—Ç 30 –¥–æ 480"),
        ("abc", "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç"),
        ("-10", "–æ—Ç 30 –¥–æ 480"),
    ])
    async def test_weekday_custom_input_validation(
        self,
        message_factory,
        fsm_context,
        invalid_value,
        expected_error
    ):
        """Test validation of weekday custom input."""
        await fsm_context.set_state(SettingsStates.waiting_for_weekday_interval_custom)

        message = message_factory(invalid_value)

        await process_weekday_custom_input(message, fsm_context)

        # FSM should NOT be cleared (allow retry)
        assert await fsm_context.get_state() == SettingsStates.waiting_for_weekday_interval_custom.state

        # Error message shown
        call_text = message.answer.call_args[0][0]
        assert expected_error.lower() in call_text.lower()

    # TODO: Similar tests for weekend and reminder delay
```

**Coverage target:** 90%+

---

### üß™ –†–∞–∑–¥–µ–ª 3.3: Unit Tests –¥–ª—è /cancel Handler (–ó–ê–î–ê–ß–ê 3)

**Test File:** `services/tracker_activity_bot/tests/unit/test_cancel_command.py`

```python
"""
Unit tests for /cancel command handlers.

Tests new functionality from TASK 3: /cancel support in all FSM states.
"""
import pytest
from src.api.handlers.settings import cancel_settings_fsm
from src.api.handlers.activity import cancel_activity_fsm
from src.api.handlers.categories import cancel_category_fsm


class TestCancelCommand:
    """Test /cancel command in different FSM states."""

    @pytest.mark.unit
    @pytest.mark.asyncio
    async def test_cancel_in_settings_fsm(self, message_factory, fsm_context):
        """Test /cancel clears settings FSM."""
        from src.api.states.settings import SettingsStates

        # Set active FSM state
        await fsm_context.set_state(SettingsStates.waiting_for_weekday_interval_custom)

        message = message_factory("/cancel")

        await cancel_settings_fsm(message, fsm_context)

        # FSM cleared
        assert await fsm_context.get_state() is None

        # Confirmation shown
        call_text = message.answer.call_args[0][0]
        assert "–æ—Ç–º–µ–Ω–µ–Ω–∞" in call_text.lower()

    @pytest.mark.unit
    @pytest.mark.asyncio
    async def test_cancel_when_no_fsm(self, message_factory, fsm_context):
        """Test /cancel when FSM is not active."""
        # No FSM state
        assert await fsm_context.get_state() is None

        message = message_factory("/cancel")

        await cancel_settings_fsm(message, fsm_context)

        # Should show "nothing to cancel"
        call_text = message.answer.call_args[0][0]
        assert "–Ω–µ—á–µ–≥–æ –æ—Ç–º–µ–Ω—è—Ç—å" in call_text.lower()

    # TODO: Tests for cancel in activity and category FSM
```

---

### üß™ –†–∞–∑–¥–µ–ª 3.4: Integration Tests –¥–ª—è Inline Keyboards

**Test File:** `services/tracker_activity_bot/tests/integration/test_category_inline_buttons.py`

```python
"""
Integration tests for category inline button selection.

Tests new functionality from TASK 8: inline buttons for category selection.
"""
import pytest
from src.api.keyboards.poll import get_poll_category_keyboard


class TestCategoryInlineButtons:
    """Test category selection with inline buttons."""

    @pytest.mark.integration
    def test_get_poll_category_keyboard_structure(self):
        """Test keyboard structure for category selection."""
        categories = [
            {"id": 1, "name": "Work", "emoji": "üíº"},
            {"id": 2, "name": "Sport", "emoji": "üèÉ"},
            {"id": 3, "name": "Study", "emoji": "üìö"},
        ]

        keyboard = get_poll_category_keyboard(categories)

        # Should have 2 rows (2 categories per row) + 1 cancel button row
        assert len(keyboard.inline_keyboard) == 2  # 2 categories rows + cancel

        # First row should have 2 buttons
        assert len(keyboard.inline_keyboard[0]) == 2

        # Check button data format
        first_button = keyboard.inline_keyboard[0][0]
        assert first_button.text == "üíº Work"
        assert first_button.callback_data == "poll_category_1"

        # Last row should have cancel button
        cancel_row = keyboard.inline_keyboard[-1]
        assert len(cancel_row) == 1
        assert cancel_row[0].text == "‚ùå –û—Ç–º–µ–Ω–∏—Ç—å"
        assert cancel_row[0].callback_data == "poll_cancel"

    # TODO: Test keyboard with 1, 5, 10 categories
    # TODO: Test keyboard with empty categories list
```

---

### üß™ –†–∞–∑–¥–µ–ª 3.5: Service Tests –¥–ª—è API Endpoints

**Test File:** `services/data_postgres_api/tests/service/test_activity_endpoints.py`

```python
"""
Service tests for activity endpoints.

Tests full request/response cycle using TestClient.
"""
import pytest
from fastapi.testclient import TestClient
from src.main import app


@pytest.fixture
def test_client():
    """Provide TestClient."""
    return TestClient(app)


class TestActivityEndpoints:
    """Test activity API endpoints."""

    @pytest.mark.service
    def test_create_activity(self, test_client, mocker):
        """Test POST /api/v1/activities."""
        # Mock database session
        # Create test data
        # Send request
        # Verify response

        payload = {
            "user_id": "user_123",
            "category_id": 1,
            "description": "Test activity",
            "start_time": "2025-11-05T10:00:00Z",
            "end_time": "2025-11-05T11:00:00Z",
            "tags": []
        }

        response = test_client.post("/api/v1/activities", json=payload)

        assert response.status_code == 201
        data = response.json()
        assert data["description"] == "Test activity"
        assert "id" in data

    @pytest.mark.service
    def test_get_user_activities(self, test_client):
        """Test GET /api/v1/activities."""
        response = test_client.get(
            "/api/v1/activities",
            params={"user_id": "user_123", "limit": 10}
        )

        assert response.status_code == 200
        data = response.json()
        assert isinstance(data, list)
        assert len(data) <= 10

    # TODO: Test validation errors (422)
    # TODO: Test not found (404)
    # TODO: Test unauthorized access
```

---

## –ß–ê–°–¢–¨ 4: PERFORMANCE –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### ‚ö° –†–∞–∑–¥–µ–ª 4.1: Response Time Tests

**Test Case TC-027: API Response Time**

```
Test: Measure response time for critical endpoints

Endpoints:
- POST /api/v1/activities
- GET /api/v1/activities?user_id=X&limit=10
- GET /api/v1/categories?user_id=X
- POST /api/v1/users

Method:
1. Use Apache Bench or similar tool
2. Send 100 requests
3. Measure P50, P95, P99

Expected Result:
‚úì P50 < 200ms
‚úì P95 < 500ms
‚úì P99 < 1000ms

Pass/Fail: [ ]
Command: ab -n 100 -c 10 http://localhost:8080/health
```

---

### ‚ö° –†–∞–∑–¥–µ–ª 4.2: Load Tests

**Test Case TC-028: Concurrent Users**

```
Test: Simulate 10 concurrent users

Scenario:
1. 10 users simultaneously:
   - Register (/start)
   - Create category
   - Create activity
   - Receive poll

Method: Use locust or similar

Expected Result:
‚úì All operations succeed
‚úì No deadlocks
‚úì No memory leaks
‚úì Response time < 2s for 95%

Pass/Fail: [ ]
```

---

## –ß–ê–°–¢–¨ 5: COVERAGE REPORT

### üìä –†–∞–∑–¥–µ–ª 5.1: Coverage Targets

**Run coverage:**
```bash
# Bot service
cd services/tracker_activity_bot
pytest tests/ -v --cov=src --cov-report=html --cov-report=term

# API service
cd services/data_postgres_api
pytest tests/ -v --cov=src --cov-report=html --cov-report=term
```

**Targets:**

| Component | Current | Target | Priority |
|-----------|---------|--------|----------|
| **tracker_activity_bot** | ~5% | 80% | HIGH |
| - handlers/poll.py | 0% | 90% | CRITICAL |
| - handlers/settings.py | 0% | 85% | HIGH |
| - handlers/activity.py | 0% | 85% | HIGH |
| - keyboards/* | 0% | 70% | MEDIUM |
| - states/* | 100% | 100% | ‚úì |
| **data_postgres_api** | ~20% | 80% | HIGH |
| - api/v1/activities.py | 0% | 90% | CRITICAL |
| - api/v1/users.py | 0% | 90% | CRITICAL |
| - repositories/* | 0% | 85% | HIGH |

---

## –ö–û–ù–¢–†–û–õ–¨–ù–´–ô –°–ü–ò–°–û–ö –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### ‚úÖ Manual E2E Tests

- [ ] TC-001: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- [ ] TC-002: –ó–∞–ø–∏—Å—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å inline –∫–Ω–æ–ø–∫–∞–º–∏
- [ ] TC-003: –û—Ç–º–µ–Ω–∞ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- [ ] TC-004: –ü—Ä–æ–ø—É—Å–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ "0"
- [ ] TC-005: –¢–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥ –≤—Ä–µ–º–µ–Ω–∏ + keyboard
- [ ] TC-006: –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- [ ] TC-007: –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- [ ] TC-008: –û–ø—Ä–æ—Å "–ó–∞–Ω–∏–º–∞–ª—Å—è —á–µ–º-—Ç–æ"
- [ ] TC-009: –û–ø—Ä–æ—Å "–°–ø–∞–ª" (—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π duration)
- [ ] TC-010: –û—Ç–∫–ª–∞–¥—ã–≤–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞ –ø—Ä–∏ FSM –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ
- [ ] TC-011: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
- [ ] TC-012: –ö–∞—Å—Ç–æ–º–Ω—ã–π –≤–≤–æ–¥ –±—É–¥–Ω–∏—Ö –¥–Ω–µ–π
- [ ] TC-013: –ö–∞—Å—Ç–æ–º–Ω—ã–π –≤–≤–æ–¥ –≤—ã—Ö–æ–¥–Ω—ã—Ö
- [ ] TC-014: –ö–∞—Å—Ç–æ–º–Ω—ã–π –≤–≤–æ–¥ –∑–∞–¥–µ—Ä–∂–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- [ ] TC-015: –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –≤–≤–æ–¥–∞
- [ ] TC-016: –¢–∏—Ö–∏–µ —á–∞—Å—ã (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –±–µ–∑ –ø—É—Å—Ç—ã—Ö —Å–ø–∏—Å–∫–æ–≤)
- [ ] TC-017: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞)
- [ ] TC-018: /cancel –≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- [ ] TC-019: /cancel –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- [ ] TC-020: /cancel –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- [ ] TC-021: /cancel –±–µ–∑ FSM
- [ ] TC-022: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ø–µ—á–∞—Ç–∞–µ—Ç..."
- [ ] TC-023: –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π

### ‚úÖ Regression Tests

- [ ] TC-024: Smoke tests (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
- [ ] TC-025: Health endpoint
- [ ] TC-026: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª

### ‚úÖ Automated Tests

- [ ] test_poll_handlers.py (–ó–ê–î–ê–ß–ê 1)
- [ ] test_settings_custom_input.py (–ó–ê–î–ê–ß–ê 2)
- [ ] test_cancel_command.py (–ó–ê–î–ê–ß–ê 3)
- [ ] test_category_inline_buttons.py (–ó–ê–î–ê–ß–ê 8)
- [ ] test_activity_endpoints.py (API)
- [ ] test_user_endpoints.py (API)
- [ ] test_category_endpoints.py (API)

### ‚úÖ Performance Tests

- [ ] TC-027: Response time
- [ ] TC-028: Concurrent users

### ‚úÖ Coverage

- [ ] tracker_activity_bot: 80%+
- [ ] data_postgres_api: 80%+
- [ ] HTML reports generated
- [ ] Critical paths: 100%

---

## –û–¢–ß–ï–¢–ù–û–°–¢–¨

### –§–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–∞:

```markdown
# Test Execution Report
**Date:** YYYY-MM-DD
**Executed by:** Name
**Build:** #version

## Summary
- Total tests: XX
- Passed: XX
- Failed: XX
- Blocked: XX
- Coverage: XX%

## Failed Tests
| TC ID | Name | Reason | Severity |
|-------|------|--------|----------|
| TC-XXX | ... | ... | Critical |

## Coverage Report
[Link to htmlcov/index.html]

## Recommendations
- ...
```

---

## –ö–†–ò–¢–ï–†–ò–ò –ì–û–¢–û–í–ù–û–°–¢–ò –ö PRODUCTION

**–í—Å–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚úÖ:**

- [ ] All critical TC (TC-001 to TC-021) passed
- [ ] Zero critical bugs
- [ ] Coverage ‚â• 80%
- [ ] Performance: P95 < 1s
- [ ] Load test: 10 concurrent users OK
- [ ] Docker health checks: all healthy
- [ ] No memory leaks
- [ ] Logs clean (no ERROR level in normal flow)

---

## –ò–ù–°–¢–†–£–ú–ï–ù–¢–´

### Testing Tools:
```bash
# Unit/Service tests
pytest

# Coverage
pytest-cov

# API testing
httpx, requests

# Load testing
locust, ab (Apache Bench)

# Mocking
pytest-mock, unittest.mock
```

### Monitoring:
```bash
# Docker stats
docker compose ps
docker compose logs -f

# DB queries
docker exec -it tracker_db psql -U tracker_user -d tracker_db

# Redis
docker exec -it tracker_redis redis-cli
```

---

## –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ A: Test Data

**Test Users:**
```json
{
  "telegram_id": 123456789,
  "name": "Test User",
  "timezone": "Europe/Moscow"
}
```

**Test Categories:**
```json
[
  {"name": "Work", "emoji": "üíº"},
  {"name": "Sport", "emoji": "üèÉ"},
  {"name": "Study", "emoji": "üìö"}
]
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ B: Useful Commands

```bash
# Reset test database
docker compose down -v
docker compose up -d

# Clear Redis (FSM states)
docker exec -it tracker_redis redis-cli FLUSHALL

# View logs
docker compose logs -f tracker_activity_bot | grep ERROR

# Run specific test
pytest tests/unit/test_poll_handlers.py::TestPollActivityFlow::test_handle_poll_activity_start_success -v

# Coverage report
pytest --cov=src --cov-report=html
open htmlcov/index.html
```

---

**–ö–æ–Ω–µ—Ü –ø–ª–∞–Ω–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è v1.0**
